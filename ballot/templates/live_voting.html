{% extends "layouts/base.html" %}
{% block title %} Live Voting {% endblock %}
{% block styles %}
<style>
a.disabled {
    pointer-events: none;
    color: #ccc;
}
td.status {
  font-size: 20px;
}
td.status > .dropdown-icon {
  margin-left: 1rem;
  margin-right: 0.5rem;
}
</style>
{% endblock %}
{% block content %}
<div class="my-3 my-md-5">
  <div class="container">
    <div class="page-header">
      <h1 class="page-title">
        {{ poll_details.title }}
      </h1>
    </div>
    <div class="row row-cards row-deck">
      <div class="col-12">
        <div class="card">
          <div class="table-responsive">
            <table class="table table-hover table-outline table-vcenter text-nowrap card-table">
              <thead>
                <tr>
                  <th>Item</th>
                  <th class="text-center">Voting Status</th>
                  <th class="text-center">Action</th>
                </tr>
              </thead>
              <tbody>
                {% for item in poll_details.items %}
                <tr>
                  <td>
                    <div>{{ forloop.counter }}. {{ item.text }}</div>
                  </td>
                  <td class="text-center status">
                    <i class="dropdown-icon fa fa-smile-o"></i>{{ item.result.smile }}
                    <i class="dropdown-icon fa fa-meh-o"></i>{{ item.result.meh }}
                    <i class="dropdown-icon fa fa-frown-o"></i>{{ item.result.frown }}
                    &nbsp;&nbsp;
                    <i class="dropdown-icon fa fa-user-times"></i>{{ item.result.miss }}
                  </td>
                  <td class="text-center">
                    {% if item.is_open %}
                    <a href="{% url 'ballot:close_live_voting' item.id %}" target="_self" class="dropdown-item"><i class="dropdown-icon fe fe-disc"></i><b>Close Voting</b></a>
                    {% else %}
                    <a href="{% url 'ballot:open_live_voting' item.id %}" target="_self" class="dropdown-item {% if has_voting_opened %}disabled{% endif %}"><i class="dropdown-icon fe fe-check-circle"></i>Open Voting</a>
                    {% endif %}
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script type="text/javascript">
  require(['jquery'], function () {
    $(".nav-link").removeClass("active");
    $(".nav-link.live_voting").addClass("active");
  });
</script>
{% endblock javascripts %}